# WAVs-Normalizer

指定したフォルダ内のすべての音声ファイル（WAV/MP3）を、会話向けに聞きやすい音量レベルに一括で整音（ノーマライズ）するWindows向けアプリケーションです。
このアプリケーションは、GUI（グラフィカルユーザーインターフェース）モードと、CUI（コマンドラインインターフェース）モードの両方で動作します。

## 機能
- **入力**: フォルダを指定すると、その中のWAVおよびMP3ファイルを処理対象とします。
- **音声処理**:
    - 会話向けに最適化されたコンプレッサー処理を適用します。
    - 全体を均一な音量にするため、ピークノーマライズ処理を適用します。
- **出力**:
    - `WAV (16bit)` または `MP3 (256kbps)` のいずれかの形式を選択できます。
    - 出力ファイルは、入力フォルダと同じ階層に作成される `{入力フォルダ名}-Nomalized` という名前のフォルダに保存されます。
- **進捗表示**: GUIとCUIの両方で、処理の進捗と残り時間の目安を表示します。

---

## 実行方法

### ステップ1: 必要なライブラリのインストール
`requirements.txt` を使って、必要なPythonライブラリをインストールします。
```bash
pip install -r requirements.txt
```

### ステップ2: FFmpegのインストール (非常に重要)
このアプリケーションは、音声ファイルを処理するために内部で`pydub`ライブラリを使用しており、`pydub`は**FFmpeg**という外部プログラムに依存しています。
**FFmpegがPCにインストールされていないと、アプリケーションは音声ファイルを読み込めず、エラーとなります。**

- **Windowsの場合:**
    1.  [FFmpegの公式サイト](https://ffmpeg.org/download.html) からWindows向けのビルドをダウンロードします（例: `gyan.dev` や `BtbN` から）。
    2.  ダウンロードしたzipファイルを解凍し、中にある `bin` フォルダ（`ffmpeg.exe`が入っているフォルダ）を `C:\` 直下など、わかりやすい場所に配置します（例: `C:\ffmpeg\bin`）。
    3.  Windowsの環境変数 `Path` に、配置した`bin`フォルダのパス（例: `C:\ffmpeg\bin`）を追加します。
    4.  コマンドプロンプトを開き、 `ffmpeg -version` と入力してバージョン情報が表示されれば設定完了です。

### ステップ3: アプリケーションの実行
上記の設定が完了したら、GUIモードまたはCUIモードでアプリケーションを実行できます。

#### GUIモードでの実行
コマンドプロンプトで以下のコマンドを実行すると、GUIウィンドウが起動します。
```bash
python main.py
```
![UI Screenshot](https://i.ibb.co/L6V55hG/screenshot.png)
*(UIのスクリーンショットイメージです。実際のアプリケーションのデザインとは異なる場合があります。)*

1.  `入力フォルダを選択` ボタンで、処理したい音声ファイルが入ったフォルダを選びます。
2.  処理対象のファイル数が表示されます。
3.  `出力形式` をドロップダウンメニューから選択します。
4.  `処理開始` ボタンを押すと、処理が始まり、進捗と残り時間の目安が表示されます。

#### CUIモードでの実行
コマンドライン引数を指定して、CUIモードで直接ファイル処理を実行できます。
```bash
python main.py --no-gui --input "C:\path\to\your\audio_folder" --format mp3
```

**コマンドライン引数:**
- `--no-gui`: (必須) CUIモードで実行します。
- `-i`, `--input`: (必須) 処理対象の音声ファイルが含まれる入力フォルダのパスを指定します。
- `-f`, `--format`: (任意) 出力形式を指定します。`wav` または `mp3` を選択できます。デフォルトは `wav` です。

---

## 開発に使用した主なライブラリ
- **Python**: 3.x
- **PyQt6**: GUIフレームワーク
- **pydub**: 音声処理ライブラリ
- **tqdm**: CUIモードでの進捗バー表示ライブラリ